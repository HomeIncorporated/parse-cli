language: go
go:
  - 1.9
script:
  - go test -v ./...
before_deploy:
  - go get github.com/inconshreveable/mousetrap # temporary fix for travis build breaks for windows due to cobra dependency on mousetrap
  - GOOS=darwin GOARCH=amd64 go build -o b4a -v github.com/back4app/parse-cli
  - GOOS=windows GOARCH=386 go build -o b4a.exe -v github.com/back4app/parse-cli
  - GOOS=linux GOARCH=386 go build -o b4a_linux -v github.com/back4app/parse-cli
  - GOOS=linux GOARCH=arm go build -o b4a_linux_arm -v github.com/back4app/parse-cli
  - cp b4a parse
  - cp b4a.exe parse.exe
  - cp b4a_linux parse_linux
  - cp b4a_linux_arm parse_linux_arm
deploy:
  provider: releases
  api_key:
    secure: "b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAACFwAAAAdzc2gtcnNhAAAAAwEAAQAAAgEA0ATwgHb/ju3v/bpil/8IMVLXZ6oooLUmrMiowuyvmW6sXH5aamrUBVTHkyI6GSVWktRquckfKau048yM7TUpGFYUxPleAcMj7pn0ME1pzgIlXYaKyKAJZ3Xj573RpO4KUmMu16GOS6Ao/38eCXYiNT/FsPqiHA6GFAkdm73uFikBBvAffAYomTfesS+jiDkwPmZP+7GmlqPRZVpexAEmXRtdUy3ChR81wEDyhfNFqrOvwErJRi7tlZ9gS1/J2nWox6o+ALKcLdXCTYhcnanCtf7U7fgfffzotoBfYvLQNRHc8mfhiCmS5O59BsmvAHEGJSpSV3l0Nynp+IrvDZ88/Q+QXzgTkXlbnxqAZEI2/WQJ2oQmcGosl3XBDfKGajbLUmsehhN3QtE2FSJfOd6I+LSS8k2YTB7Ov77/x5+s1uRCcJjDIoKR4GV6rx6Phi8NxRQcc0bmtWGWsqvrcaIit4xmBawpnLvMHkSXHb5jBYsqYhCeLH5usJ7qOYwF6Ak5HcmNzABr6t2h6lG+DE2syiFG3hTLzcEqtYWew3JV5xEOUaQ37mnllNIgjt7pieP2lbgBRbf+JiF/KR/zhgft/t+a2X/nznaZBjQA+Pb0Smm6k1ReLxQKgCbaSewKVg1DQl/MVoXwdsflpJUuQbN8MbJol7QRpv3TYmgWQZTzsRsAAAdQp1M2k6dTNpMAAAAHc3NoLXJzYQAAAgEA0ATwgHb/ju3v/bpil/8IMVLXZ6oooLUmrMiowuyvmW6sXH5aamrUBVTHkyI6GSVWktRquckfKau048yM7TUpGFYUxPleAcMj7pn0ME1pzgIlXYaKyKAJZ3Xj573RpO4KUmMu16GOS6Ao/38eCXYiNT/FsPqiHA6GFAkdm73uFikBBvAffAYomTfesS+jiDkwPmZP+7GmlqPRZVpexAEmXRtdUy3ChR81wEDyhfNFqrOvwErJRi7tlZ9gS1/J2nWox6o+ALKcLdXCTYhcnanCtf7U7fgfffzotoBfYvLQNRHc8mfhiCmS5O59BsmvAHEGJSpSV3l0Nynp+IrvDZ88/Q+QXzgTkXlbnxqAZEI2/WQJ2oQmcGosl3XBDfKGajbLUmsehhN3QtE2FSJfOd6I+LSS8k2YTB7Ov77/x5+s1uRCcJjDIoKR4GV6rx6Phi8NxRQcc0bmtWGWsqvrcaIit4xmBawpnLvMHkSXHb5jBYsqYhCeLH5usJ7qOYwF6Ak5HcmNzABr6t2h6lG+DE2syiFG3hTLzcEqtYWew3JV5xEOUaQ37mnllNIgjt7pieP2lbgBRbf+JiF/KR/zhgft/t+a2X/nznaZBjQA+Pb0Smm6k1ReLxQKgCbaSewKVg1DQl/MVoXwdsflpJUuQbN8MbJol7QRpv3TYmgWQZTzsRsAAAADAQABAAACAQCGykyU0YbzNJaH0JhGaUkDvOw7DfVZfUhcOYGxHPED+MTTAkTQI/zSn4bafhkrZhhc+CtXy0zYEZ0a5taCdin0zQKUSAl0FuBXoYarLd5bUOSpX57aNWkiky9kYIlR17T0gbQ+oT61Hkiylcn+03+DBZmx/hXBHGAg5286Fa4KyfMSbdHY6Zyw+5TfN0E96eCq7lzxeMG7ZtcuV4qEc0JKnoqwdTxQSlLoCq2bwnDoFZrSfSNCyPHGPAmHjcAcQJVnG5clmJa+1H4dAzkQKIo0p7WNpXOyjYi1iSVF1pS3bqW+pTVsp5O5qBd3qIQvQw16U5wbdmWpwQ0MseoI55/6J1jTp+O3ttq+KySNitS7nWnJdg2MRKne6mezom4IfofJHKkmYymX8ERsjMhHOW0E5fgKe+0hScd4lbfT7xqe6kdmmR4/UwoIuhxapdbB3M9zZKnYZP5hYNm5X9s3IQDvU0t/ly+pYWtz1tKBPgnV3iIuFCXoClUdViJxqBrcQEA0K5ljdkBDNa80VpNc4/043KuTi/YH2D1uJ8rMqHf/upanBhnbGGzFfgvBwzrlwnfUGALEjaPavhTThoYUX3Dy4uAhbSJAggQzOacbshHVQPQPwafwIc5XzqxeNWlqkdaqfAcQaldaSc0jRBTxpC1adlRSJSxGxhJkIba5kMGd0QAAAQAegbKc9D6/fVfd0+LEnSayx883fLAk/Ot6v5+EuUf3Ah/6wYKyh1QCndV+Ql9/0G0fbZU6t4CrSPSCzi/tl4PyD2vFCByMyfvfr7CD0k4D6Ok6R+oN7S0ceybiX7sImWyMkJuGplBCW8DNSIHIM16yWDXnB1Iieo9abQ9vf0HbaoS62yj0OaaZ7zZyFN2prp/W4IWRb5fehxNTT/vsEQLNwRoMFmPirdStqfrSgX0l/IwmeuVIPgNeviLYPKVdC05eRHzLqiTi0BryzKINIjTViBGcpfMIhMf2bp01KRj+0j+vLX67wdHjSnIUIEbSXGBlqxFAmzRBE/78gOGMijsNAAABAQDq/UDUpbcgNgxy5pTgzlDmSw2LCBxBV0AkAs1xuUGsiEPXaUerzjAAk8EwgGFgtONq0hjyjp1eGSIoMMfhAPmWIt/gO1d780d9zNgqPNix9cT4QSpwN2pMwWhUJ9fRc4bZr3C2MoM1e2PAfKXKOwozSnNBHxBFNL9oJ50dcCQtX8m9eHkCMqvYg+7C8lmgklN8FSWOJ4hBOI90JcHF0EMkiO3rVSM+CL7/No7JWdfTBYC/0aAKdNY2cpM4eUrcRLUyg6xtBdfVrvsySfQ68E4GonWY5xeKt1yab7lL/LWmFuZgkbt2F2jsADzisvEunVne1zKBJ3vwhPc3SbIk1r6dAAABAQDinlyPfPNHLfVKkSMeNxgMVN195JNAPyQmJHTXKmMk8qD6lhU6uagphqcg+JYxiDuDklTgcpSoFccUwzKVEob2MR1VxNVf85YeeGNB0KLI7z9eoZY5vOpFS2JsLz/MancMLlkMAmfNZYr8oddCOpkRuoHvv5By3+FywXRy2ZgM0g46XyQYO0l5NWifwuNBrW33EZOJ7HTFwjJiAXYrklW4eE9zShBsYP1BpblwI6xwhIgyRScnAVWY5bqrRMdCoiX0A5UE3+2PcJactsHWNKBwG4Ye9X7mbHwAniNheBl08lcuo3v7ugQx0M5HxDwyXEb0emBOkfxasPgPfkfM1YUXAAAAFmNvbW11bml0eUBiYWNrNGFwcC5jb20BAgME"
#    secure: "CJMqOWtrUzSAjY3jif+jIU/dlocZ+2ylAgRcPq7JV6yPM3/XyZ8i09lkzM7IrGL/KQd9ZvDuyLHAJJTtzuvgOTc8QtJLrS88hj/5lE/6uahJ8F63SlLJJ3RFPsV0DPVMpP65Azl+poZBLsjrbjaj2AlAYJl1j2FVd8CxfMIrGaLbnQARhU+HgDukrXTpIf9GMOHeEat8/oORPXpahQwfoZDb8WXZIYnG/SLZDegzZMb+281ErzLcaSfZrBnKGSPbidZQvdBYwZQqRNTXN+PLHIdMqaVckilpHi3uh4McTLs9hu8TiwxxZWFvhH4BA8BG/pcKZ6hAJXseHiOef7WAII6Btb3gE7SSKTuH0DFsEa0LvUhW1se/MTOOMxhVaSSxskpNG1UUFnQXpdabKMP9N7ZbTT7SOpMZsEsGdHPh6P9lJ5OsVogo+YLABEqgAHWtuXWBj1/g0iWUglaCBPQZcdOJWd8C0bYHsEAk+O+SovtFKXPSKtEh6OJajv+8K63GRrpnQvlMQcXg6PKlFMJBr8atpcOpdV6Ld3yFHIO0kTaEn2uZc3j5yt2GVS4M3wEpQ/eeFns6asEXg2gkwQgQh68Dc1jSoKMy/4ffbCV4LHEJn0QnowZ+T4gb4wXLIsYVFCX020HZbqA3gnJoRkgdh1P5HHr7fyN+gQPWHOnDHto="

  file:
    - b4a
    - b4a.exe
    - b4a_linux
    - b4a_linux_arm
    - parse
    - parse.exe
    - parse_linux
    - parse_linux_arm
  skip_cleanup: true
  on:
    repo: back4app/parse-cli
    tags: true
    condition: $TRAVIS_TAG =~ ^release_.*
